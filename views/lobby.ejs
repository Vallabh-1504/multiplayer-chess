<% layout('layout') %>

<div class="container min-vh-100 d-flex align-items-center justify-content-center">
    <div class="col-md-6">
        <div id="lobby" class="mb-4 w-100">
            <h3 class="text-white mb-3">Game Lobby</h3>
            
            <button id="create-game-btn" class="btn btn-primary w-100 mb-3">Create New Game</button>
            <h4 class="text-white-50 fs-6">Join an existing game:</h4>
            
            <div id="game-list" class="list-group">
                <% if (games.length === 0) { %>
                    <p id="no-games-msg" class="text-muted">No active games found.</p>
                <% } else { %>
                    <% games.forEach(game => { %>
                        <% 
                            let gameStatusText = `Players: ${game.playerCount}/2`;
                            if (game.playerCount === 2) {
                                gameStatusText = "Game in progress (Spectate)";
                            }
                        %>
                        <a href="/game/<%= game.roomId %>" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                            <span>Room: <%= game.roomId.substring(0, 8) %>...</span>
                            <span class="badge bg-secondary"><%= gameStatusText %></span>
                        </a>
                    <% }) %>
                <% } %>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.socket.io/4.8.1/socket.io.min.js"></script>
<script src="/lobby.js"></script>